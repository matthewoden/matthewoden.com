<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="192x192" href="/static/favicons/favicon-192x192.png"/><link rel="icon" type="image/png" sizes="512x512" href="/static/favicons/favicon-512x512.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/index.xml"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap" media="print"/><noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"/></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if(!e)return localStorage.setItem('theme','light'),d.add('light');if("system"===e){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/matthewoden"/><meta name="twitter:creator" content="https://twitter.com/matthewoden"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="600"/><meta property="og:locale" content="en-us"/><meta name="author" content="Matthew Oden Potter"/><title>Common problems when using NPM Enterprise. – MatthewOden.com</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="A better developer experience when using private registries"/><meta property="og:url" content="https://matthewoden.com/notes/2017-08-15-common-problems-with-npm-enterprise"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2017-08-15T00:00:00.000Z"/><meta property="article:modified_time" content="2017-08-15T00:00:00.000Z"/><meta property="article:author" content="https://matthewoden.com/about"/><meta property="article:tag" content="node"/><meta property="article:tag" content="config"/><meta property="og:title" content="Common problems when using NPM Enterprise."/><meta property="og:description" content="A better developer experience when using private registries"/><meta property="og:image" content="https://matthewoden.com/static/images/face.png"/><meta property="og:image:alt" content="Common problems when using NPM Enterprise."/><link rel="canonical" href="https://matthewoden.com/notes/2017-08-15-common-problems-with-npm-enterprise"/><meta name="twitter:image" content="https://matthewoden.com/static/images/face.png"/><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://matthewoden.com/notes/2017-08-15-common-problems-with-npm-enterprise"
    },
    "headline": "Common problems when using NPM Enterprise.",
    "image": [
      "[object Object]"
     ],
    "datePublished": "2017-08-15T00:00:00.000Z",
    "dateModified": "2017-08-15T00:00:00.000Z",
    "author": {"@type": "Person","name": "Matthew Oden Potter"},
    "publisher": {
      "@type": "Organization",
      "name": "Matthew Oden Potter",
      "logo": {
        "@type": "ImageObject",
        "url": "undefined"
      }
    },
    "description": "A better developer experience when using private registries"
  }</script><meta name="next-head-count" content="28"/><link rel="preload" href="/_next/static/css/40c272ad66e3b5045f49.css" as="style"/><link rel="stylesheet" href="/_next/static/css/40c272ad66e3b5045f49.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-a837451738e9bc430433.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3001023d071dd3bbe4b7.js" as="script"/><link rel="preload" href="/_next/static/chunks/9adc93607ca194fe33d5fd75450ccdb7397e9788.9fbf4a83f1e2236cbcd2.js" as="script"/><link rel="preload" href="/_next/static/chunks/36831c9346731e813c333dbc96f1dae7f0140181.0be75cecccf812d630d3.js" as="script"/><link rel="preload" href="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.56bb5d8090d059ec8b57.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-443197cdf2ed8c4b363a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/notes/%5Bslug%5D-771ca72895c067407b5c.js" as="script"/></head><body class="antialiased bg-gray-900 text-white"><div id="__next"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex flex-col justify-between h-screen"><header class="flex items-center justify-between py-10"><div><a href="/"><div class="flex items-center justify-between"><div class="h-6 text-2xl font-semibold">MatthewOden.com</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium sm:p-4 text-gray-100" href="/notes">Notes</a><a class="p-1 font-medium sm:p-4 text-gray-100" href="/tags">Tags</a><a class="p-1 font-medium sm:p-4 text-gray-100" href="/about">About</a></div><div class="sm:hidden"><button type="button" class="w-8 h-8 ml-1 mr-1 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed w-full h-full top-24 right-0 bg-gray-800 opacity-95 z-10 transform ease-in-out duration-300 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed w-full h-full cursor-auto focus:outline-none"></button><nav class="fixed h-full mt-8"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-100" href="/notes">Notes</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-5xl xl:px-0"><article><div class="xl:divide-y xl:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-400"><time dateTime="2017-08-15">Monday, August 14, 2017</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Common problems when using NPM Enterprise.</h1></div></div></header><div class="pb-8 divide-y xl:divide-y-0 divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:pt-11 xl:border-b  xl:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 xl:block sm:space-x-12 xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/face.png" alt="avatar" class="w-10 h-10 rounded-full"/><dl class="text-sm font-medium leading-5 whitespace-nowrap"><dt class="sr-only">Name</dt><dd class="text-gray-100">Matthew Oden Potter</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/matthewoden" class="text-blue-500 hover:text-blue-400">@matthewoden</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-700 xl:pb-0 xl:col-span-3 xl:row-span-2"><div class="pt-10 pb-8 prose prose-dark max-w-none"><div><p>Using a private registry like NPM Enterprise (NPM E) is a great way to
share proprietary code across a large development team. Developers can install, find, and
publish private modules, using the same basic <code>npm</code> CLI they&#x27;re used to.</p><p>Sadly, NPM&#x27;s error output is often misleading about the actual underlying problem,
and having two registries can often lead to further misdirection.</p><p>The following is a quick guide to handling some of the more common and frustrating issues.</p><h2 id="a-quick-definition-of-terms"><a href="#a-quick-definition-of-terms" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>A quick definition of terms</h2><p>Most of the issues involve adjusting your <code>.npmrc</code> files or using module
<a target="_blank" rel="noopener noreferrer" href="https://docs.npmjs.com/misc/scope">scopes</a>. If you don&#x27;t know about either of
these, read on. Otherwise, feel free to skip down to troubleshooting.</p><h3 id="what-is-an-npmrc-file"><a href="#what-is-an-npmrc-file" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>What is an <code>.npmrc</code> file?</h3><p>The <code>.npmrc</code> (or sometimes just <code>npmrc</code>) file is a configuration file for npm.
It&#x27;s effectively a key-value store, and it&#x27;s location determines it&#x27;s scope of
control over npm modules.</p><p>You can configure it...</p><ul><li>in config file that comes with npm: <code>/path/to/npm/npmrc</code></li><li>globally on this machine: <code>$PREFIX/etc/npmrc</code></li><li>for the current user: <code>~/.npmrc</code></li><li>on a per project-basis project: <code>/path/to/my/project/.npmrc</code></li></ul><p>Configuration options are resolved in order of priority. The project-level
configuration overrides the user&#x27;s settings, and the user&#x27;s settings override
the global machine settings, and so on.</p><p>For local development, I only ever update the configuration in
my home directory, and in the project directory. Only your test/build
server should ever really be concerned about configuring any other <code>npmrc</code> file.</p><p>Full details on configuring npmrc files can be found <a target="_blank" rel="noopener noreferrer" href="https://docs.npmjs.com/files/npmrc">here</a>.</p><h3 id="why-use-a-scope"><a href="#why-use-a-scope" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Why use a scope?</h3><p>If you&#x27;re using a private registry, it&#x27;s a good practice to group your proprietary
modules under at least one scope. Using a scope helps signal which modules are
private, and also allows for more granular configuration in your <code>npmrc</code> files.</p><p>Read more about module scopes <a target="_blank" rel="noopener noreferrer" href="https://docs.npmjs.com/misc/scope">here</a></p><p>I&#x27;ll go over how these work together in the examples below.</p><hr/><h2 id="troubleshooting-installs"><a href="#troubleshooting-installs" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Troubleshooting installs</h2><p>Generally, install issues boil down to pointing to the right registry,
for the right scope.</p><h3 id="when-npm-cant-find-an-open-source-library-that-you-know-exists"><a href="#when-npm-cant-find-an-open-source-library-that-you-know-exists" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>When npm can&#x27;t find an open-source library that you know exists:</h3><pre class="language-bash"><code class="language-bash"><span class="text-gray-400 italic"># example error output</span>
No matching version found <span class="text-code-purple">for</span> some-library@x.x.x
</code></pre><p>One of the benefits of NPM E is that it can be installed on whatever
server you like, including on-premise. When mirroring packages, this can often
lead to faster installs and builds.</p><p>The downside to this is that after your team mirrors enough packages, your NPM E
instance can start falling out of sync with the main registry.</p><h4 id="solutions"><a href="#solutions" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Solutions</h4><ol><li><p>If you&#x27;re the one running ops on your registry,
<a target="_blank" rel="noopener noreferrer" href="https://npme.npmjs.com/docs/troubleshooting/replication.html">The NPM CLI on the server can</a>
to get your modules back in sync.</p></li><li><p>If you don&#x27;t have access to your NPM E instance, then I&#x27;d suggest pointing to
<a target="_blank" rel="noopener noreferrer" href="https://registry.npmjs.org/">https://registry.npmjs.org/</a> as your main registry, and falling back to
your private registery for your scoped modules.</p><pre><code>Here&#x27;s an example `npmrc` file with this kind of pass-through configuration:
</code></pre></li></ol><pre class="language-bash"><code class="language-bash"><span class="text-gray-400 italic"># Example Environment Setup:</span>
<span class="">registry</span><span class="">=</span>https://registry.npmjs.org/
@yourscope:registry<span class="">=</span>https://your.registry
//your.registry/:_authToken <span class="text-code-white">{</span>your access token goes here<span class="text-code-white">}</span>
</code></pre><h3 id="when-npm-cant-find-an-scopedprivate-library-that-you-know-exists"><a href="#when-npm-cant-find-an-scopedprivate-library-that-you-know-exists" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>When npm can&#x27;t find an scoped/private library that you know exists:</h3><pre class="language-bash"><code class="language-bash"><span class="text-gray-400 italic"># example error output</span>
<span class="">404</span> finding @yourscope/some-library
</code></pre><p>By default, NPM E checks authorization and ownership on all scoped modules.
If you&#x27;re using a scope, this can lead to some false positives on missing
modules.</p><h4 id="solutions-1"><a href="#solutions-1" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Solutions</h4><p>Only point your scope at your private registry, and point all
other modules at the main registry.</p><ol><li>Set the scope globally for your user.</li></ol><pre class="language-bash"><code class="language-bash"><span class="text-code-blue">npm</span> config <span class="">set</span> registry https://registry.npmjs.org
<span class="text-code-blue">npm</span> config <span class="">set</span> @scoped:registry https://your.registry
<span class="text-code-blue">npm</span> config <span class="">set</span> //your.registry/:_authToken <span class="text-code-white">{</span>your token<span class="text-code-white">}</span>
</code></pre><ol><li><p>Set the scope for just one project, by adding a npmrc at the root.</p><pre class="language-bash"><code class="language-bash"><span class="text-gray-400 italic"># .npmrc file in the root of your project</span>
<span class="">registry</span><span class="">=</span>https://registry.npmjs.org
@yourscope:registry<span class="">=</span>https://your.registry
</code></pre><p><strong>Never</strong> put your personal auth token in as part of your source code.
Instead, set your auth token as part of your user configuration.</p><pre class="language-bash"><code class="language-bash"><span class="text-code-blue">npm</span> config <span class="">set</span> //your.registry/:_authToken <span class="text-code-white">{</span>your token<span class="text-code-white">}</span>
</code></pre></li></ol><hr/><h2 id="troubleshooting-publishing"><a href="#troubleshooting-publishing" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Troubleshooting Publishing</h2><p>Like installing, scopes are the main cause of publishing problems, but
package.json configuration can also be an issue, especially with private
and proprietary code.</p><h3 id="publishing-a-module-returns-a-404"><a href="#publishing-a-module-returns-a-404" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Publishing a module returns a 404.</h3><pre class="language-bash"><code class="language-bash"><span class="text-gray-400 italic"># example error output</span>
<span class="">404</span> finding @yourscope/some-library
</code></pre><p>Publishing often has the least helpful error outputs, and most problems return
an unhelpful 404 error, rather than the real problem.</p><h4 id="solutions-2"><a href="#solutions-2" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Solutions</h4><ol><li>Your module&#x27;s scope is pointed at the wrong registry. Update your user&#x27;s <code>.npmrc</code> file
with the appropriate scopes and tokens.</li></ol><pre class="language-bash"><code class="language-bash"><span class="text-code-blue">npm</span> config <span class="">set</span> @scoped:registry https://your.registry
<span class="text-code-blue">npm</span> config <span class="">set</span> //your.registry/:_authToken <span class="text-code-white">{</span>your token<span class="text-code-white">}</span>
</code></pre><ol><li>Your module&#x27;s <code>package.json</code> has a respository field, but you haven&#x27;t set a
value for the url.</li><li>Your module&#x27;s <code>package.json</code> is completely filled out, but your pointing
to a private git repository. Your git repo doesn&#x27;t have to be public to the
world, but it does have to be public to the registry.</li></ol><hr/><p>That should cover most of the frustrating errors. If you&#x27;ve come across other
stumbling blocks, let me know!</p></div></div><div class="pt-6 pb-6 text-sm text-gray-700 text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fmatthewoden.com%2Fnotes%2F2017-08-15-common-problems-with-npm-enterprise">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/matthewoden/matthewoden.com/blob/master/data/notes/2017-08-15-common-problems-with-npm-enterprise.md">View on GitHub</a></div></div><footer><div class="text-sm font-medium leading-5 xl:divide-y divide-gray-700 xl:col-start-1 xl:row-start-2"><div class="py-4 xl:py-8"><h2 class="text-xs tracking-wide uppercase text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-xs font-medium text-blue-500 lowercase hover:text-blue-400" href="/tags/node">node</a><a class="mr-3 text-xs font-medium text-blue-500 lowercase hover:text-blue-400" href="/tags/config">config</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs tracking-wide  uppercase text-gray-400">Previous Article</h2><div class="text-blue-500 hover:text-blue-400"><a href="/notes/2016-04-14-setting-up-erlang-and-elixir-from-precompiled-binaries">Setting up Erlang and Elixir from precompiled binaries.</a></div></div><div><h2 class="text-xs tracking-wide uppercase text-gray-400">Next Article</h2><div class="text-blue-500 hover:text-blue-400"><a href="/notes/2017-09-02-the-golden-rule-of-node-never-do-work">Node isn&#x27;t where you do work.</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-blue-500 hover:text-blue-400" href="/notes">← Back to Notes</a></div></footer></div></div></article></div></main><footer><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:heymatthewoden@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-200 hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/matthewoden"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-200 hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/matthewoden"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-200 hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/matthew-potter-8194998a/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-200 hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-400"><div>Matthew Oden Potter</div><div> • </div><div>© 2017</div><div> • </div><a href="/">MatthewOden.com</a></div><div class="mb-8 text-sm text-gray-400"> </div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"Using a private registry like NPM Enterprise (NPM E) is a great way to\\nshare proprietary code across a large development team. Developers can install, find, and\\npublish private modules, using the same basic \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npm\"), \" CLI they're used to.\"), mdx(\"p\", null, \"Sadly, NPM's error output is often misleading about the actual underlying problem,\\nand having two registries can often lead to further misdirection.\"), mdx(\"p\", null, \"The following is a quick guide to handling some of the more common and frustrating issues.\"), mdx(\"h2\", {\n    \"id\": \"a-quick-definition-of-terms\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#a-quick-definition-of-terms\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"A quick definition of terms\"), mdx(\"p\", null, \"Most of the issues involve adjusting your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".npmrc\"), \" files or using module\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.npmjs.com/misc/scope\"\n  }), \"scopes\"), \". If you don't know about either of\\nthese, read on. Otherwise, feel free to skip down to troubleshooting.\"), mdx(\"h3\", {\n    \"id\": \"what-is-an-npmrc-file\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#what-is-an-npmrc-file\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"What is an \", mdx(\"inlineCode\", {\n    parentName: \"h3\"\n  }, \".npmrc\"), \" file?\"), mdx(\"p\", null, \"The \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \".npmrc\"), \" (or sometimes just \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npmrc\"), \") file is a configuration file for npm.\\nIt's effectively a key-value store, and it's location determines it's scope of\\ncontrol over npm modules.\"), mdx(\"p\", null, \"You can configure it...\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"in config file that comes with npm: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/path/to/npm/npmrc\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"globally on this machine: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"$PREFIX/etc/npmrc\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"for the current user: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"~/.npmrc\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"on a per project-basis project: \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"/path/to/my/project/.npmrc\"))), mdx(\"p\", null, \"Configuration options are resolved in order of priority. The project-level\\nconfiguration overrides the user's settings, and the user's settings override\\nthe global machine settings, and so on.\"), mdx(\"p\", null, \"For local development, I only ever update the configuration in\\nmy home directory, and in the project directory. Only your test/build\\nserver should ever really be concerned about configuring any other \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npmrc\"), \" file.\"), mdx(\"p\", null, \"Full details on configuring npmrc files can be found \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.npmjs.com/files/npmrc\"\n  }), \"here\"), \".\"), mdx(\"h3\", {\n    \"id\": \"why-use-a-scope\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#why-use-a-scope\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"Why use a scope?\"), mdx(\"p\", null, \"If you're using a private registry, it's a good practice to group your proprietary\\nmodules under at least one scope. Using a scope helps signal which modules are\\nprivate, and also allows for more granular configuration in your \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"npmrc\"), \" files.\"), mdx(\"p\", null, \"Read more about module scopes \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://docs.npmjs.com/misc/scope\"\n  }), \"here\")), mdx(\"p\", null, \"I'll go over how these work together in the examples below.\"), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"troubleshooting-installs\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#troubleshooting-installs\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"Troubleshooting installs\"), mdx(\"p\", null, \"Generally, install issues boil down to pointing to the right registry,\\nfor the right scope.\"), mdx(\"h3\", {\n    \"id\": \"when-npm-cant-find-an-open-source-library-that-you-know-exists\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#when-npm-cant-find-an-open-source-library-that-you-know-exists\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"When npm can't find an open-source library that you know exists:\"), mdx(\"pre\", {\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-gray-400 italic\"\n  }), \"# example error output\"), \"\\nNo matching version found \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-purple\"\n  }), \"for\"), \" some-library@x.x.x\\n\")), mdx(\"p\", null, \"One of the benefits of NPM E is that it can be installed on whatever\\nserver you like, including on-premise. When mirroring packages, this can often\\nlead to faster installs and builds.\"), mdx(\"p\", null, \"The downside to this is that after your team mirrors enough packages, your NPM E\\ninstance can start falling out of sync with the main registry.\"), mdx(\"h4\", {\n    \"id\": \"solutions\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#solutions\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"Solutions\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"If you're the one running ops on your registry,\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://npme.npmjs.com/docs/troubleshooting/replication.html\"\n  }), \"The NPM CLI on the server can\"), \"\\nto get your modules back in sync.\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"If you don't have access to your NPM E instance, then I'd suggest pointing to\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://registry.npmjs.org/\"\n  }), \"https://registry.npmjs.org/\"), \" as your main registry, and falling back to\\nyour private registery for your scoped modules.\"), mdx(\"pre\", {\n    parentName: \"li\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {}), \"Here's an example `npmrc` file with this kind of pass-through configuration:\\n\")))), mdx(\"pre\", {\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-gray-400 italic\"\n  }), \"# Example Environment Setup:\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"registry\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"=\"), \"https://registry.npmjs.org/\\n@yourscope:registry\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"=\"), \"https://your.registry\\n//your.registry/:_authToken \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-white\"\n  }), \"{\"), \"your access token goes here\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-white\"\n  }), \"}\"), \"\\n\")), mdx(\"h3\", {\n    \"id\": \"when-npm-cant-find-an-scopedprivate-library-that-you-know-exists\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#when-npm-cant-find-an-scopedprivate-library-that-you-know-exists\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"When npm can't find an scoped/private library that you know exists:\"), mdx(\"pre\", {\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-gray-400 italic\"\n  }), \"# example error output\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"404\"), \" finding @yourscope/some-library\\n\")), mdx(\"p\", null, \"By default, NPM E checks authorization and ownership on all scoped modules.\\nIf you're using a scope, this can lead to some false positives on missing\\nmodules.\"), mdx(\"h4\", {\n    \"id\": \"solutions-1\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#solutions-1\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"Solutions\"), mdx(\"p\", null, \"Only point your scope at your private registry, and point all\\nother modules at the main registry.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Set the scope globally for your user.\")), mdx(\"pre\", {\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-blue\"\n  }), \"npm\"), \" config \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"set\"), \" registry https://registry.npmjs.org\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-blue\"\n  }), \"npm\"), \" config \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"set\"), \" @scoped:registry https://your.registry\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-blue\"\n  }), \"npm\"), \" config \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"set\"), \" //your.registry/:_authToken \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-white\"\n  }), \"{\"), \"your token\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-white\"\n  }), \"}\"), \"\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"p\", {\n    parentName: \"li\"\n  }, \"Set the scope for just one project, by adding a npmrc at the root.\"), mdx(\"pre\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-gray-400 italic\"\n  }), \"# .npmrc file in the root of your project\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"registry\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"=\"), \"https://registry.npmjs.org\\n@yourscope:registry\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"=\"), \"https://your.registry\\n\")), mdx(\"p\", {\n    parentName: \"li\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Never\"), \" put your personal auth token in as part of your source code.\\nInstead, set your auth token as part of your user configuration.\"), mdx(\"pre\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-blue\"\n  }), \"npm\"), \" config \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"set\"), \" //your.registry/:_authToken \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-white\"\n  }), \"{\"), \"your token\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-white\"\n  }), \"}\"), \"\\n\")))), mdx(\"hr\", null), mdx(\"h2\", {\n    \"id\": \"troubleshooting-publishing\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#troubleshooting-publishing\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"Troubleshooting Publishing\"), mdx(\"p\", null, \"Like installing, scopes are the main cause of publishing problems, but\\npackage.json configuration can also be an issue, especially with private\\nand proprietary code.\"), mdx(\"h3\", {\n    \"id\": \"publishing-a-module-returns-a-404\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#publishing-a-module-returns-a-404\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"Publishing a module returns a 404.\"), mdx(\"pre\", {\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-gray-400 italic\"\n  }), \"# example error output\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"404\"), \" finding @yourscope/some-library\\n\")), mdx(\"p\", null, \"Publishing often has the least helpful error outputs, and most problems return\\nan unhelpful 404 error, rather than the real problem.\"), mdx(\"h4\", {\n    \"id\": \"solutions-2\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#solutions-2\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"Solutions\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Your module's scope is pointed at the wrong registry. Update your user's \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \".npmrc\"), \" file\\nwith the appropriate scopes and tokens.\")), mdx(\"pre\", {\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-blue\"\n  }), \"npm\"), \" config \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"set\"), \" @scoped:registry https://your.registry\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-blue\"\n  }), \"npm\"), \" config \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"\"\n  }), \"set\"), \" //your.registry/:_authToken \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-white\"\n  }), \"{\"), \"your token\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"text-code-white\"\n  }), \"}\"), \"\\n\")), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Your module's \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"package.json\"), \" has a respository field, but you haven't set a\\nvalue for the url.\"), mdx(\"li\", {\n    parentName: \"ol\"\n  }, \"Your module's \", mdx(\"inlineCode\", {\n    parentName: \"li\"\n  }, \"package.json\"), \" is completely filled out, but your pointing\\nto a private git repository. Your git repo doesn't have to be public to the\\nworld, but it does have to be public to the registry.\")), mdx(\"hr\", null), mdx(\"p\", null, \"That should cover most of the frustrating errors. If you've come across other\\nstumbling blocks, let me know!\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eUsing a private registry like NPM Enterprise (NPM E) is a great way to\nshare proprietary code across a large development team. Developers can install, find, and\npublish private modules, using the same basic \u003ccode\u003enpm\u003c/code\u003e CLI they\u0026#x27;re used to.\u003c/p\u003e\u003cp\u003eSadly, NPM\u0026#x27;s error output is often misleading about the actual underlying problem,\nand having two registries can often lead to further misdirection.\u003c/p\u003e\u003cp\u003eThe following is a quick guide to handling some of the more common and frustrating issues.\u003c/p\u003e\u003ch2 id=\"a-quick-definition-of-terms\"\u003e\u003ca href=\"#a-quick-definition-of-terms\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eA quick definition of terms\u003c/h2\u003e\u003cp\u003eMost of the issues involve adjusting your \u003ccode\u003e.npmrc\u003c/code\u003e files or using module\n\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.npmjs.com/misc/scope\"\u003escopes\u003c/a\u003e. If you don\u0026#x27;t know about either of\nthese, read on. Otherwise, feel free to skip down to troubleshooting.\u003c/p\u003e\u003ch3 id=\"what-is-an-npmrc-file\"\u003e\u003ca href=\"#what-is-an-npmrc-file\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eWhat is an \u003ccode\u003e.npmrc\u003c/code\u003e file?\u003c/h3\u003e\u003cp\u003eThe \u003ccode\u003e.npmrc\u003c/code\u003e (or sometimes just \u003ccode\u003enpmrc\u003c/code\u003e) file is a configuration file for npm.\nIt\u0026#x27;s effectively a key-value store, and it\u0026#x27;s location determines it\u0026#x27;s scope of\ncontrol over npm modules.\u003c/p\u003e\u003cp\u003eYou can configure it...\u003c/p\u003e\u003cul\u003e\u003cli\u003ein config file that comes with npm: \u003ccode\u003e/path/to/npm/npmrc\u003c/code\u003e\u003c/li\u003e\u003cli\u003eglobally on this machine: \u003ccode\u003e$PREFIX/etc/npmrc\u003c/code\u003e\u003c/li\u003e\u003cli\u003efor the current user: \u003ccode\u003e~/.npmrc\u003c/code\u003e\u003c/li\u003e\u003cli\u003eon a per project-basis project: \u003ccode\u003e/path/to/my/project/.npmrc\u003c/code\u003e\u003c/li\u003e\u003c/ul\u003e\u003cp\u003eConfiguration options are resolved in order of priority. The project-level\nconfiguration overrides the user\u0026#x27;s settings, and the user\u0026#x27;s settings override\nthe global machine settings, and so on.\u003c/p\u003e\u003cp\u003eFor local development, I only ever update the configuration in\nmy home directory, and in the project directory. Only your test/build\nserver should ever really be concerned about configuring any other \u003ccode\u003enpmrc\u003c/code\u003e file.\u003c/p\u003e\u003cp\u003eFull details on configuring npmrc files can be found \u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.npmjs.com/files/npmrc\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\u003ch3 id=\"why-use-a-scope\"\u003e\u003ca href=\"#why-use-a-scope\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eWhy use a scope?\u003c/h3\u003e\u003cp\u003eIf you\u0026#x27;re using a private registry, it\u0026#x27;s a good practice to group your proprietary\nmodules under at least one scope. Using a scope helps signal which modules are\nprivate, and also allows for more granular configuration in your \u003ccode\u003enpmrc\u003c/code\u003e files.\u003c/p\u003e\u003cp\u003eRead more about module scopes \u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://docs.npmjs.com/misc/scope\"\u003ehere\u003c/a\u003e\u003c/p\u003e\u003cp\u003eI\u0026#x27;ll go over how these work together in the examples below.\u003c/p\u003e\u003chr/\u003e\u003ch2 id=\"troubleshooting-installs\"\u003e\u003ca href=\"#troubleshooting-installs\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTroubleshooting installs\u003c/h2\u003e\u003cp\u003eGenerally, install issues boil down to pointing to the right registry,\nfor the right scope.\u003c/p\u003e\u003ch3 id=\"when-npm-cant-find-an-open-source-library-that-you-know-exists\"\u003e\u003ca href=\"#when-npm-cant-find-an-open-source-library-that-you-know-exists\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eWhen npm can\u0026#x27;t find an open-source library that you know exists:\u003c/h3\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"text-gray-400 italic\"\u003e# example error output\u003c/span\u003e\nNo matching version found \u003cspan class=\"text-code-purple\"\u003efor\u003c/span\u003e some-library@x.x.x\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eOne of the benefits of NPM E is that it can be installed on whatever\nserver you like, including on-premise. When mirroring packages, this can often\nlead to faster installs and builds.\u003c/p\u003e\u003cp\u003eThe downside to this is that after your team mirrors enough packages, your NPM E\ninstance can start falling out of sync with the main registry.\u003c/p\u003e\u003ch4 id=\"solutions\"\u003e\u003ca href=\"#solutions\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSolutions\u003c/h4\u003e\u003col\u003e\u003cli\u003e\u003cp\u003eIf you\u0026#x27;re the one running ops on your registry,\n\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://npme.npmjs.com/docs/troubleshooting/replication.html\"\u003eThe NPM CLI on the server can\u003c/a\u003e\nto get your modules back in sync.\u003c/p\u003e\u003c/li\u003e\u003cli\u003e\u003cp\u003eIf you don\u0026#x27;t have access to your NPM E instance, then I\u0026#x27;d suggest pointing to\n\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://registry.npmjs.org/\"\u003ehttps://registry.npmjs.org/\u003c/a\u003e as your main registry, and falling back to\nyour private registery for your scoped modules.\u003c/p\u003e\u003cpre\u003e\u003ccode\u003eHere\u0026#x27;s an example `npmrc` file with this kind of pass-through configuration:\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\u003c/ol\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"text-gray-400 italic\"\u003e# Example Environment Setup:\u003c/span\u003e\n\u003cspan class=\"\"\u003eregistry\u003c/span\u003e\u003cspan class=\"\"\u003e=\u003c/span\u003ehttps://registry.npmjs.org/\n@yourscope:registry\u003cspan class=\"\"\u003e=\u003c/span\u003ehttps://your.registry\n//your.registry/:_authToken \u003cspan class=\"text-code-white\"\u003e{\u003c/span\u003eyour access token goes here\u003cspan class=\"text-code-white\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003ch3 id=\"when-npm-cant-find-an-scopedprivate-library-that-you-know-exists\"\u003e\u003ca href=\"#when-npm-cant-find-an-scopedprivate-library-that-you-know-exists\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eWhen npm can\u0026#x27;t find an scoped/private library that you know exists:\u003c/h3\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"text-gray-400 italic\"\u003e# example error output\u003c/span\u003e\n\u003cspan class=\"\"\u003e404\u003c/span\u003e finding @yourscope/some-library\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eBy default, NPM E checks authorization and ownership on all scoped modules.\nIf you\u0026#x27;re using a scope, this can lead to some false positives on missing\nmodules.\u003c/p\u003e\u003ch4 id=\"solutions-1\"\u003e\u003ca href=\"#solutions-1\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSolutions\u003c/h4\u003e\u003cp\u003eOnly point your scope at your private registry, and point all\nother modules at the main registry.\u003c/p\u003e\u003col\u003e\u003cli\u003eSet the scope globally for your user.\u003c/li\u003e\u003c/ol\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"text-code-blue\"\u003enpm\u003c/span\u003e config \u003cspan class=\"\"\u003eset\u003c/span\u003e registry https://registry.npmjs.org\n\u003cspan class=\"text-code-blue\"\u003enpm\u003c/span\u003e config \u003cspan class=\"\"\u003eset\u003c/span\u003e @scoped:registry https://your.registry\n\u003cspan class=\"text-code-blue\"\u003enpm\u003c/span\u003e config \u003cspan class=\"\"\u003eset\u003c/span\u003e //your.registry/:_authToken \u003cspan class=\"text-code-white\"\u003e{\u003c/span\u003eyour token\u003cspan class=\"text-code-white\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003col\u003e\u003cli\u003e\u003cp\u003eSet the scope for just one project, by adding a npmrc at the root.\u003c/p\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"text-gray-400 italic\"\u003e# .npmrc file in the root of your project\u003c/span\u003e\n\u003cspan class=\"\"\u003eregistry\u003c/span\u003e\u003cspan class=\"\"\u003e=\u003c/span\u003ehttps://registry.npmjs.org\n@yourscope:registry\u003cspan class=\"\"\u003e=\u003c/span\u003ehttps://your.registry\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003e\u003cstrong\u003eNever\u003c/strong\u003e put your personal auth token in as part of your source code.\nInstead, set your auth token as part of your user configuration.\u003c/p\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"text-code-blue\"\u003enpm\u003c/span\u003e config \u003cspan class=\"\"\u003eset\u003c/span\u003e //your.registry/:_authToken \u003cspan class=\"text-code-white\"\u003e{\u003c/span\u003eyour token\u003cspan class=\"text-code-white\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003c/li\u003e\u003c/ol\u003e\u003chr/\u003e\u003ch2 id=\"troubleshooting-publishing\"\u003e\u003ca href=\"#troubleshooting-publishing\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTroubleshooting Publishing\u003c/h2\u003e\u003cp\u003eLike installing, scopes are the main cause of publishing problems, but\npackage.json configuration can also be an issue, especially with private\nand proprietary code.\u003c/p\u003e\u003ch3 id=\"publishing-a-module-returns-a-404\"\u003e\u003ca href=\"#publishing-a-module-returns-a-404\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003ePublishing a module returns a 404.\u003c/h3\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"text-gray-400 italic\"\u003e# example error output\u003c/span\u003e\n\u003cspan class=\"\"\u003e404\u003c/span\u003e finding @yourscope/some-library\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003ePublishing often has the least helpful error outputs, and most problems return\nan unhelpful 404 error, rather than the real problem.\u003c/p\u003e\u003ch4 id=\"solutions-2\"\u003e\u003ca href=\"#solutions-2\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eSolutions\u003c/h4\u003e\u003col\u003e\u003cli\u003eYour module\u0026#x27;s scope is pointed at the wrong registry. Update your user\u0026#x27;s \u003ccode\u003e.npmrc\u003c/code\u003e file\nwith the appropriate scopes and tokens.\u003c/li\u003e\u003c/ol\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e\u003cspan class=\"text-code-blue\"\u003enpm\u003c/span\u003e config \u003cspan class=\"\"\u003eset\u003c/span\u003e @scoped:registry https://your.registry\n\u003cspan class=\"text-code-blue\"\u003enpm\u003c/span\u003e config \u003cspan class=\"\"\u003eset\u003c/span\u003e //your.registry/:_authToken \u003cspan class=\"text-code-white\"\u003e{\u003c/span\u003eyour token\u003cspan class=\"text-code-white\"\u003e}\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\u003col\u003e\u003cli\u003eYour module\u0026#x27;s \u003ccode\u003epackage.json\u003c/code\u003e has a respository field, but you haven\u0026#x27;t set a\nvalue for the url.\u003c/li\u003e\u003cli\u003eYour module\u0026#x27;s \u003ccode\u003epackage.json\u003c/code\u003e is completely filled out, but your pointing\nto a private git repository. Your git repo doesn\u0026#x27;t have to be public to the\nworld, but it does have to be public to the registry.\u003c/li\u003e\u003c/ol\u003e\u003chr/\u003e\u003cp\u003eThat should cover most of the frustrating errors. If you\u0026#x27;ve come across other\nstumbling blocks, let me know!\u003c/p\u003e","scope":{}},"frontMatter":{"wordCount":826,"readingTime":{"text":"5 min read","minutes":4.12,"time":247200.00000000003,"words":824},"slug":"2017-08-15-common-problems-with-npm-enterprise","fileName":"2017-08-15-common-problems-with-npm-enterprise.md","title":"Common problems when using NPM Enterprise.","date":"2017-08-15","tags":["node","config"],"summary":"A better developer experience when using private registries","draft":false}},"prev":{"title":"Setting up Erlang and Elixir from precompiled binaries.","date":"2016-04-14","tags":["elixir"],"summary":"Skip the build step, and jump straight into development.","slug":"2016-04-14-setting-up-erlang-and-elixir-from-precompiled-binaries"},"next":{"title":"Node isn't where you do work.","date":"2017-09-02","summary":"Push work to other systems, and let node coordinate your flow.","tags":["node","architecture"],"slug":"2017-09-02-the-golden-rule-of-node-never-do-work"}},"__N_SSG":true},"page":"/notes/[slug]","query":{"slug":"2017-08-15-common-problems-with-npm-enterprise"},"buildId":"UTpuJG0W1qYQ-gcL4uUSR","runtimeConfig":{},"nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-0b9b5722f0d6cfa79d03.js"></script><script src="/_next/static/chunks/main-a837451738e9bc430433.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/commons.3001023d071dd3bbe4b7.js" async=""></script><script src="/_next/static/chunks/9adc93607ca194fe33d5fd75450ccdb7397e9788.9fbf4a83f1e2236cbcd2.js" async=""></script><script src="/_next/static/chunks/36831c9346731e813c333dbc96f1dae7f0140181.0be75cecccf812d630d3.js" async=""></script><script src="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.56bb5d8090d059ec8b57.js" async=""></script><script src="/_next/static/chunks/pages/_app-443197cdf2ed8c4b363a.js" async=""></script><script src="/_next/static/chunks/pages/notes/%5Bslug%5D-771ca72895c067407b5c.js" async=""></script><script src="/_next/static/UTpuJG0W1qYQ-gcL4uUSR/_buildManifest.js" async=""></script><script src="/_next/static/UTpuJG0W1qYQ-gcL4uUSR/_ssgManifest.js" async=""></script></body></html>