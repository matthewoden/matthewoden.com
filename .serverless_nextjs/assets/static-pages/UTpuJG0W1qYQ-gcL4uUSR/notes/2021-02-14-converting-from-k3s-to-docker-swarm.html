<!DOCTYPE html><html lang="en"><head><link rel="apple-touch-icon" sizes="76x76" href="/static/favicons/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="192x192" href="/static/favicons/favicon-192x192.png"/><link rel="icon" type="image/png" sizes="512x512" href="/static/favicons/favicon-512x512.png"/><link rel="manifest" href="/static/favicons/site.webmanifest"/><meta name="msapplication-TileColor" content="#000000"/><meta name="theme-color" content="#000000"/><link rel="alternate" type="application/rss+xml" href="/index.xml"/><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin="anonymous"/><link rel="preload" as="style" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"/><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap" media="print"/><noscript><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&amp;display=swap"/></noscript><link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/fonts/KaTeX_Main-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/fonts/KaTeX_Math-Italic.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/fonts/KaTeX_Size2-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="preload" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/fonts/KaTeX_Size4-Regular.woff2" as="font" type="font/woff2" crossorigin="anonymous"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.2/dist/katex.min.css" integrity="sha384-yFRtMMDnQtDRO8rLpMIKrtPCD5jdktao2TV19YiZYWMDkUR5GQZR/NOVTdquEx1j" crossorigin="anonymous"/><meta charSet="utf-8"/><script>!function(){try {var d=document.documentElement.classList;d.remove('light','dark');var e=localStorage.getItem('theme');if(!e)return localStorage.setItem('theme','light'),d.add('light');if("system"===e){var t="(prefers-color-scheme: dark)",m=window.matchMedia(t);m.media!==t||m.matches?d.add('dark'):d.add('light')}else d.add(e)}catch(e){}}()</script><meta content="width=device-width, initial-scale=1" name="viewport"/><meta name="twitter:card" content="summary_large_image"/><meta name="twitter:site" content="https://twitter.com/matthewoden"/><meta name="twitter:creator" content="https://twitter.com/matthewoden"/><meta property="og:image:width" content="1200"/><meta property="og:image:height" content="600"/><meta property="og:locale" content="en-us"/><meta name="author" content="Matthew Oden Potter"/><title>Converting from K3s to Docker Swarm – MatthewOden.com</title><meta name="robots" content="index,follow"/><meta name="googlebot" content="index,follow"/><meta name="description" content="Sometimes, it&#x27;s nice to scale down the homelab to something a little simpler."/><meta property="og:url" content="https://matthewoden.com/notes/2021-02-14-converting-from-k3s-to-docker-swarm"/><meta property="og:type" content="article"/><meta property="article:published_time" content="2021-02-14T00:00:00.000Z"/><meta property="article:modified_time" content="2021-02-14T00:00:00.000Z"/><meta property="article:author" content="https://matthewoden.com/about"/><meta property="article:tag" content="devops"/><meta property="article:tag" content="docker"/><meta property="og:title" content="Converting from K3s to Docker Swarm"/><meta property="og:description" content="Sometimes, it&#x27;s nice to scale down the homelab to something a little simpler."/><meta property="og:image" content="https://matthewoden.com/static/images/face.png"/><meta property="og:image:alt" content="Converting from K3s to Docker Swarm"/><link rel="canonical" href="https://matthewoden.com/notes/2021-02-14-converting-from-k3s-to-docker-swarm"/><meta name="twitter:image" content="https://matthewoden.com/static/images/face.png"/><script type="application/ld+json">{
    "@context": "https://schema.org",
    "@type": "Article",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://matthewoden.com/notes/2021-02-14-converting-from-k3s-to-docker-swarm"
    },
    "headline": "Converting from K3s to Docker Swarm",
    "image": [
      "[object Object]"
     ],
    "datePublished": "2021-02-14T00:00:00.000Z",
    "dateModified": "2021-02-14T00:00:00.000Z",
    "author": {"@type": "Person","name": "Matthew Oden Potter"},
    "publisher": {
      "@type": "Organization",
      "name": "Matthew Oden Potter",
      "logo": {
        "@type": "ImageObject",
        "url": "undefined"
      }
    },
    "description": "Sometimes, it's nice to scale down the homelab to something a little simpler."
  }</script><meta name="next-head-count" content="28"/><link rel="preload" href="/_next/static/css/40c272ad66e3b5045f49.css" as="style"/><link rel="stylesheet" href="/_next/static/css/40c272ad66e3b5045f49.css" data-n-g=""/><noscript data-n-css=""></noscript><link rel="preload" href="/_next/static/chunks/main-a837451738e9bc430433.js" as="script"/><link rel="preload" href="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" as="script"/><link rel="preload" href="/_next/static/chunks/commons.3001023d071dd3bbe4b7.js" as="script"/><link rel="preload" href="/_next/static/chunks/9adc93607ca194fe33d5fd75450ccdb7397e9788.9fbf4a83f1e2236cbcd2.js" as="script"/><link rel="preload" href="/_next/static/chunks/36831c9346731e813c333dbc96f1dae7f0140181.0be75cecccf812d630d3.js" as="script"/><link rel="preload" href="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.56bb5d8090d059ec8b57.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/_app-443197cdf2ed8c4b363a.js" as="script"/><link rel="preload" href="/_next/static/chunks/pages/notes/%5Bslug%5D-771ca72895c067407b5c.js" as="script"/></head><body class="antialiased bg-gray-900 text-white"><div id="__next"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-5xl xl:px-0"><div class="flex flex-col justify-between h-screen"><header class="flex items-center justify-between py-10"><div><a href="/"><div class="flex items-center justify-between"><div class="h-6 text-2xl font-semibold">MatthewOden.com</div></div></a></div><div class="flex items-center text-base leading-5"><div class="hidden sm:block"><a class="p-1 font-medium sm:p-4 text-gray-100" href="/notes">Notes</a><a class="p-1 font-medium sm:p-4 text-gray-100" href="/tags">Tags</a><a class="p-1 font-medium sm:p-4 text-gray-100" href="/about">About</a></div><div class="sm:hidden"><button type="button" class="w-8 h-8 ml-1 mr-1 rounded" aria-label="Toggle Menu"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="text-gray-100"><path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg></button><div class="fixed w-full h-full top-24 right-0 bg-gray-800 opacity-95 z-10 transform ease-in-out duration-300 translate-x-full"><button type="button" aria-label="toggle modal" class="fixed w-full h-full cursor-auto focus:outline-none"></button><nav class="fixed h-full mt-8"><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-100" href="/notes">Notes</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-100" href="/tags">Tags</a></div><div class="px-12 py-4"><a class="text-2xl font-bold tracking-widest text-gray-100" href="/about">About</a></div></nav></div></div></div></header><main class="mb-auto"><div class="max-w-3xl px-4 mx-auto sm:px-6 xl:max-w-5xl xl:px-0"><article><div class="xl:divide-y xl:divide-gray-700"><header class="pt-6 xl:pb-6"><div class="space-y-1 text-center"><dl class="space-y-10"><div><dt class="sr-only">Published on</dt><dd class="text-base font-medium leading-6 text-gray-400"><time dateTime="2021-02-14">Saturday, February 13, 2021</time></dd></div></dl><div><h1 class="text-3xl font-extrabold leading-9 tracking-tight text-gray-100 sm:text-4xl sm:leading-10 md:text-5xl md:leading-14">Converting from K3s to Docker Swarm</h1></div></div></header><div class="pb-8 divide-y xl:divide-y-0 divide-gray-700 xl:grid xl:grid-cols-4 xl:gap-x-6" style="grid-template-rows:auto 1fr"><dl class="pt-6 pb-10 xl:pt-11 xl:border-b  xl:border-gray-700"><dt class="sr-only">Authors</dt><dd><ul class="flex justify-center space-x-8 xl:block sm:space-x-12 xl:space-x-0 xl:space-y-8"><li class="flex items-center space-x-2"><img src="/static/images/face.png" alt="avatar" class="w-10 h-10 rounded-full"/><dl class="text-sm font-medium leading-5 whitespace-nowrap"><dt class="sr-only">Name</dt><dd class="text-gray-100">Matthew Oden Potter</dd><dt class="sr-only">Twitter</dt><dd><a target="_blank" rel="noopener noreferrer" href="https://twitter.com/matthewoden" class="text-blue-500 hover:text-blue-400">@matthewoden</a></dd></dl></li></ul></dd></dl><div class="divide-y divide-gray-700 xl:pb-0 xl:col-span-3 xl:row-span-2"><div class="pt-10 pb-8 prose prose-dark max-w-none"><div><p>After an irrecoverable k3s failure on my pi cluster, I&#x27;ve chosen to simplify
to a basic docker swarm cluster today. I learned what I wanted - and the level of
debugging required to sort out why my servers wouldn’t come up was a little too
much like my day job, and not enough of an experimental sandbox.</p><p>You just don&#x27;t need 7 containers to orchestrate a deployments to a pi cluster.</p><h2 id="tearing-down-k3s-from-k3sup"><a href="#tearing-down-k3s-from-k3sup" aria-hidden="true" tabindex="-1"><span class="icon icon-link"></span></a>Tearing down k3s from k3sup</h2><p>As automated as the<code>k3sup</code> tool is, teardown is a process left to be discovered.</p><p>There&#x27;s two scripts - one on master, and one for agents It&#x27;s
To tear down kubernetes, <code>k3sup</code> comes with a few built in scripts.cripts. They&#x27;re</p><p>On master</p><p>/usr/local/bin/k3s-uninstall.sh</p><pre class="language-bash"><code class="language-bash">/usr/local/bin/k3s-uninstall.sh

</code></pre><p>Feb 11th - Dependency Confusion
eah - we thankfully set up our NPM registries to avoid this. (also, I wrote the auth layer for our registry.)
All private scopes were also registered publicly, with no packages, So attempting to install private packages from the public registry just fails.
All attempts to install/publish unscoped packages from a private registry are rejected.</p><p>Feb 10th - Reverse Engineer a container</p><p>History API for docker to recreate layer</p><p>Had to figure out how to reverse engineer a container to a dockerfile today. Dive is a snazzy little tool that lets you explore docker layers.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/wagoodman/dive">https://github.com/wagoodman/dive</a></p><p>January 8th
I’ve never been an inbox zero kind of person, because I hate manually archiving/deleting emails - I shouldn’t have to do it. I also hate gmail’s UI for multiple views, tabs, inboxes, etc. However I organize my email should work on every email client I use - and google’s experiments just don’t make it to the phone app.</p><p>…So, I have a bunch of gmail filters that label/archive/organize emails as they come in.
Most of my filters automatically mark things as read and shove them away for reference. But a feature I wanted was to have certain emails, like order confirmations) still notify me, and then get cleaned up quickly after that. Or, if I don’t have any rules but I’ve read the message? Just clean up the cruft after a while. I don’t need to manually organize everything.</p><p>Ultimately, my inbox should be a list of unread, actionable messages.
Google app scripts lets you call the gmail api - so I wrote a little script to do just that. Anything that I’ve read that’s older than 10 days is cleaned up. Any email I want to get notified about (for right now, just order confirmations) is cleaned up after 24 hours.
<a target="_blank" rel="noopener noreferrer" href="https://github.com/matthewoden/autoarchiver">https://github.com/matthewoden/autoarchiver</a></p><p>Gmailctl is a handy tool for managing a pile of filters.</p><p>The rest is just transactional emails that need to get wrangled.</p><p>Plus, simplify to clean up the gmail UI</p><p>January 12th</p><p>I know there&#x27;s not a lot of mac folks in here (actually, are there any besides me?) but screenotate.com is a wonderful tool. Not free - but having OCR on all your screenshots, so you have searchable, annotated results? Super nice.</p><p>Especially with the number of video calls/meetings I have - I&#x27;ve been screencapping when folks share their screen so I can grab a url, or text off a slide or whatever&#x27;s being shared without interrupting anyone.</p><p>Janyart 26th</p><p>Started using Bear for notes, and I&#x27;m a big, big fan. I love the hybrid markdown approach, where it keeps the markdown syntax, but also applies the formatting. e.g. <em>Some bold text</em> and /some italic text/</p><p>Also, little things like tagging, instead of folders. And any note that uses checkboxes (that aren&#x27;t all checked) showing up in a &quot;TODO&quot; section. Like many of the tools I use, it&#x27;s mac only.</p><p>January 27th
<a target="_blank" rel="noopener noreferrer" href="https://espanso.org/">https://espanso.org/</a></p><p>espanso
Home
An Open Source, Cross-platform Text Expander written in Rust.</p><p>Matthew Potter 8:22 PM
One of the things I immediately installed was the one that fixes the most commonly misspelled words, because I no word good</p></div></div><div class="pt-6 pb-6 text-sm text-gray-700 text-gray-300"><a target="_blank" rel="nofollow" href="https://mobile.twitter.com/search?q=https%3A%2F%2Fmatthewoden.com%2Fnotes%2F2021-02-14-converting-from-k3s-to-docker-swarm">Discuss on Twitter</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/matthewoden/matthewoden.com/blob/master/data/notes/2021-02-14-converting-from-k3s-to-docker-swarm.md">View on GitHub</a></div></div><footer><div class="text-sm font-medium leading-5 xl:divide-y divide-gray-700 xl:col-start-1 xl:row-start-2"><div class="py-4 xl:py-8"><h2 class="text-xs tracking-wide uppercase text-gray-400">Tags</h2><div class="flex flex-wrap"><a class="mr-3 text-xs font-medium text-blue-500 lowercase hover:text-blue-400" href="/tags/devops">devops</a><a class="mr-3 text-xs font-medium text-blue-500 lowercase hover:text-blue-400" href="/tags/docker">docker</a></div></div><div class="flex justify-between py-4 xl:block xl:space-y-8 xl:py-8"><div><h2 class="text-xs tracking-wide  uppercase text-gray-400">Previous Article</h2><div class="text-blue-500 hover:text-blue-400"><a href="/notes/2017-09-04-single-node-ssl-aws-elastic-beanstalk">Setting up SSL for a single-instance deploy on Elastic Beanstalk, with Docker</a></div></div></div></div><div class="pt-4 xl:pt-8"><a class="text-blue-500 hover:text-blue-400" href="/notes">← Back to Notes</a></div></footer></div></div></article></div></main><footer><div class="flex flex-col items-center mt-16"><div class="flex mb-3 space-x-4"><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="mailto:heymatthewoden@gmail.com"><span class="sr-only">mail</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" class="fill-current text-gray-200 hover:text-blue-400 h-6 w-6"><path d="M2.003 5.884L10 9.882l7.997-3.998A2 2 0 0016 4H4a2 2 0 00-1.997 1.884z"></path><path d="M18 8.118l-8 4-8-4V14a2 2 0 002 2h12a2 2 0 002-2V8.118z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://github.com/matthewoden"><span class="sr-only">github</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-200 hover:text-blue-400 h-6 w-6"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://twitter.com/matthewoden"><span class="sr-only">twitter</span><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="fill-current text-gray-200 hover:text-blue-400 h-6 w-6"><path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"></path></svg></a><a class="text-sm text-gray-500 transition hover:text-gray-600" target="_blank" rel="noopener noreferrer" href="https://www.linkedin.com/in/matthew-potter-8194998a/"><span class="sr-only">linkedin</span><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="fill-current text-gray-200 hover:text-blue-400 h-6 w-6"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a></div><div class="flex mb-2 space-x-2 text-sm text-gray-400"><div>Matthew Oden Potter</div><div> • </div><div>© 2017</div><div> • </div><a href="/">MatthewOden.com</a></div><div class="mb-8 text-sm text-gray-400"> </div></div></footer></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"mdxSource":{"compiledSource":"\"use strict\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i \u003c arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i \u003c sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i \u003c sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) \u003e= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar layoutProps = {};\nvar MDXLayout = \"wrapper\";\n\nfunction MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"After an irrecoverable k3s failure on my pi cluster, I've chosen to simplify\\nto a basic docker swarm cluster today. I learned what I wanted - and the level of\\ndebugging required to sort out why my servers wouldn\\u2019t come up was a little too\\nmuch like my day job, and not enough of an experimental sandbox.\"), mdx(\"p\", null, \"You just don't need 7 containers to orchestrate a deployments to a pi cluster.\"), mdx(\"h2\", {\n    \"id\": \"tearing-down-k3s-from-k3sup\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#tearing-down-k3s-from-k3sup\",\n    \"aria-hidden\": \"true\",\n    \"tabIndex\": -1\n  }), mdx(\"span\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"icon icon-link\"\n  }))), \"Tearing down k3s from k3sup\"), mdx(\"p\", null, \"As automated as the\", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"k3sup\"), \" tool is, teardown is a process left to be discovered.\"), mdx(\"p\", null, \"There's two scripts - one on master, and one for agents It's\\nTo tear down kubernetes, \", mdx(\"inlineCode\", {\n    parentName: \"p\"\n  }, \"k3sup\"), \" comes with a few built in scripts.cripts. They're\"), mdx(\"p\", null, \"On master\"), mdx(\"p\", null, \"/usr/local/bin/k3s-uninstall.sh\"), mdx(\"pre\", {\n    \"className\": \"language-bash\"\n  }, mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-bash\"\n  }), \"/usr/local/bin/k3s-uninstall.sh\\n\\n\")), mdx(\"p\", null, \"Feb 11th - Dependency Confusion\\neah - we thankfully set up our NPM registries to avoid this. (also, I wrote the auth layer for our registry.)\\nAll private scopes were also registered publicly, with no packages, So attempting to install private packages from the public registry just fails.\\nAll attempts to install/publish unscoped packages from a private registry are rejected.\"), mdx(\"p\", null, \"Feb 10th - Reverse Engineer a container\"), mdx(\"p\", null, \"History API for docker to recreate layer\"), mdx(\"p\", null, \"Had to figure out how to reverse engineer a container to a dockerfile today. Dive is a snazzy little tool that lets you explore docker layers.\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/wagoodman/dive\"\n  }), \"https://github.com/wagoodman/dive\")), mdx(\"p\", null, \"January 8th\\nI\\u2019ve never been an inbox zero kind of person, because I hate manually archiving/deleting emails - I shouldn\\u2019t have to do it. I also hate gmail\\u2019s UI for multiple views, tabs, inboxes, etc. However I organize my email should work on every email client I use - and google\\u2019s experiments just don\\u2019t make it to the phone app.\"), mdx(\"p\", null, \"\\u2026So, I have a bunch of gmail filters that label/archive/organize emails as they come in.\\nMost of my filters automatically mark things as read and shove them away for reference. But a feature I wanted was to have certain emails, like order confirmations) still notify me, and then get cleaned up quickly after that. Or, if I don\\u2019t have any rules but I\\u2019ve read the message? Just clean up the cruft after a while. I don\\u2019t need to manually organize everything.\"), mdx(\"p\", null, \"Ultimately, my inbox should be a list of unread, actionable messages.\\nGoogle app scripts lets you call the gmail api - so I wrote a little script to do just that. Anything that I\\u2019ve read that\\u2019s older than 10 days is cleaned up. Any email I want to get notified about (for right now, just order confirmations) is cleaned up after 24 hours.\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://github.com/matthewoden/autoarchiver\"\n  }), \"https://github.com/matthewoden/autoarchiver\")), mdx(\"p\", null, \"Gmailctl is a handy tool for managing a pile of filters.\"), mdx(\"p\", null, \"The rest is just transactional emails that need to get wrangled.\"), mdx(\"p\", null, \"Plus, simplify to clean up the gmail UI\"), mdx(\"p\", null, \"January 12th\"), mdx(\"p\", null, \"I know there's not a lot of mac folks in here (actually, are there any besides me?) but screenotate.com is a wonderful tool. Not free - but having OCR on all your screenshots, so you have searchable, annotated results? Super nice.\"), mdx(\"p\", null, \"Especially with the number of video calls/meetings I have - I've been screencapping when folks share their screen so I can grab a url, or text off a slide or whatever's being shared without interrupting anyone.\"), mdx(\"p\", null, \"Janyart 26th\"), mdx(\"p\", null, \"Started using Bear for notes, and I'm a big, big fan. I love the hybrid markdown approach, where it keeps the markdown syntax, but also applies the formatting. e.g. \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Some bold text\"), \" and /some italic text/\"), mdx(\"p\", null, \"Also, little things like tagging, instead of folders. And any note that uses checkboxes (that aren't all checked) showing up in a \\\"TODO\\\" section. Like many of the tools I use, it's mac only.\"), mdx(\"p\", null, \"January 27th\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://espanso.org/\"\n  }), \"https://espanso.org/\")), mdx(\"p\", null, \"espanso\\nHome\\nAn Open Source, Cross-platform Text Expander written in Rust.\"), mdx(\"p\", null, \"Matthew Potter 8:22 PM\\nOne of the things I immediately installed was the one that fixes the most commonly misspelled words, because I no word good\"));\n}\n\n;\nMDXContent.isMDXComponent = true;","renderedOutput":"\u003cp\u003eAfter an irrecoverable k3s failure on my pi cluster, I\u0026#x27;ve chosen to simplify\nto a basic docker swarm cluster today. I learned what I wanted - and the level of\ndebugging required to sort out why my servers wouldn’t come up was a little too\nmuch like my day job, and not enough of an experimental sandbox.\u003c/p\u003e\u003cp\u003eYou just don\u0026#x27;t need 7 containers to orchestrate a deployments to a pi cluster.\u003c/p\u003e\u003ch2 id=\"tearing-down-k3s-from-k3sup\"\u003e\u003ca href=\"#tearing-down-k3s-from-k3sup\" aria-hidden=\"true\" tabindex=\"-1\"\u003e\u003cspan class=\"icon icon-link\"\u003e\u003c/span\u003e\u003c/a\u003eTearing down k3s from k3sup\u003c/h2\u003e\u003cp\u003eAs automated as the\u003ccode\u003ek3sup\u003c/code\u003e tool is, teardown is a process left to be discovered.\u003c/p\u003e\u003cp\u003eThere\u0026#x27;s two scripts - one on master, and one for agents It\u0026#x27;s\nTo tear down kubernetes, \u003ccode\u003ek3sup\u003c/code\u003e comes with a few built in scripts.cripts. They\u0026#x27;re\u003c/p\u003e\u003cp\u003eOn master\u003c/p\u003e\u003cp\u003e/usr/local/bin/k3s-uninstall.sh\u003c/p\u003e\u003cpre class=\"language-bash\"\u003e\u003ccode class=\"language-bash\"\u003e/usr/local/bin/k3s-uninstall.sh\n\n\u003c/code\u003e\u003c/pre\u003e\u003cp\u003eFeb 11th - Dependency Confusion\neah - we thankfully set up our NPM registries to avoid this. (also, I wrote the auth layer for our registry.)\nAll private scopes were also registered publicly, with no packages, So attempting to install private packages from the public registry just fails.\nAll attempts to install/publish unscoped packages from a private registry are rejected.\u003c/p\u003e\u003cp\u003eFeb 10th - Reverse Engineer a container\u003c/p\u003e\u003cp\u003eHistory API for docker to recreate layer\u003c/p\u003e\u003cp\u003eHad to figure out how to reverse engineer a container to a dockerfile today. Dive is a snazzy little tool that lets you explore docker layers.\n\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/wagoodman/dive\"\u003ehttps://github.com/wagoodman/dive\u003c/a\u003e\u003c/p\u003e\u003cp\u003eJanuary 8th\nI’ve never been an inbox zero kind of person, because I hate manually archiving/deleting emails - I shouldn’t have to do it. I also hate gmail’s UI for multiple views, tabs, inboxes, etc. However I organize my email should work on every email client I use - and google’s experiments just don’t make it to the phone app.\u003c/p\u003e\u003cp\u003e…So, I have a bunch of gmail filters that label/archive/organize emails as they come in.\nMost of my filters automatically mark things as read and shove them away for reference. But a feature I wanted was to have certain emails, like order confirmations) still notify me, and then get cleaned up quickly after that. Or, if I don’t have any rules but I’ve read the message? Just clean up the cruft after a while. I don’t need to manually organize everything.\u003c/p\u003e\u003cp\u003eUltimately, my inbox should be a list of unread, actionable messages.\nGoogle app scripts lets you call the gmail api - so I wrote a little script to do just that. Anything that I’ve read that’s older than 10 days is cleaned up. Any email I want to get notified about (for right now, just order confirmations) is cleaned up after 24 hours.\n\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://github.com/matthewoden/autoarchiver\"\u003ehttps://github.com/matthewoden/autoarchiver\u003c/a\u003e\u003c/p\u003e\u003cp\u003eGmailctl is a handy tool for managing a pile of filters.\u003c/p\u003e\u003cp\u003eThe rest is just transactional emails that need to get wrangled.\u003c/p\u003e\u003cp\u003ePlus, simplify to clean up the gmail UI\u003c/p\u003e\u003cp\u003eJanuary 12th\u003c/p\u003e\u003cp\u003eI know there\u0026#x27;s not a lot of mac folks in here (actually, are there any besides me?) but screenotate.com is a wonderful tool. Not free - but having OCR on all your screenshots, so you have searchable, annotated results? Super nice.\u003c/p\u003e\u003cp\u003eEspecially with the number of video calls/meetings I have - I\u0026#x27;ve been screencapping when folks share their screen so I can grab a url, or text off a slide or whatever\u0026#x27;s being shared without interrupting anyone.\u003c/p\u003e\u003cp\u003eJanyart 26th\u003c/p\u003e\u003cp\u003eStarted using Bear for notes, and I\u0026#x27;m a big, big fan. I love the hybrid markdown approach, where it keeps the markdown syntax, but also applies the formatting. e.g. \u003cem\u003eSome bold text\u003c/em\u003e and /some italic text/\u003c/p\u003e\u003cp\u003eAlso, little things like tagging, instead of folders. And any note that uses checkboxes (that aren\u0026#x27;t all checked) showing up in a \u0026quot;TODO\u0026quot; section. Like many of the tools I use, it\u0026#x27;s mac only.\u003c/p\u003e\u003cp\u003eJanuary 27th\n\u003ca target=\"_blank\" rel=\"noopener noreferrer\" href=\"https://espanso.org/\"\u003ehttps://espanso.org/\u003c/a\u003e\u003c/p\u003e\u003cp\u003eespanso\nHome\nAn Open Source, Cross-platform Text Expander written in Rust.\u003c/p\u003e\u003cp\u003eMatthew Potter 8:22 PM\nOne of the things I immediately installed was the one that fixes the most commonly misspelled words, because I no word good\u003c/p\u003e","scope":{}},"frontMatter":{"wordCount":651,"readingTime":{"text":"4 min read","minutes":3.245,"time":194700.00000000003,"words":649},"slug":"2021-02-14-converting-from-k3s-to-docker-swarm","fileName":"2021-02-14-converting-from-k3s-to-docker-swarm.md","title":"Converting from K3s to Docker Swarm","date":"2021-02-14","tags":["devops","docker"],"draft":false,"summary":"Sometimes, it's nice to scale down the homelab to something a little simpler."}},"prev":{"title":"Setting up SSL for a single-instance deploy on Elastic Beanstalk, with Docker","date":"2017-09-04","tags":["devops","docker"],"draft":false,"summary":"A step by step guide to have https on your personal projects.","slug":"2017-09-04-single-node-ssl-aws-elastic-beanstalk"},"next":null},"__N_SSG":true},"page":"/notes/[slug]","query":{"slug":"2021-02-14-converting-from-k3s-to-docker-swarm"},"buildId":"UTpuJG0W1qYQ-gcL4uUSR","runtimeConfig":{},"nextExport":false,"isFallback":false,"gsp":true}</script><script nomodule="" src="/_next/static/chunks/polyfills-0b9b5722f0d6cfa79d03.js"></script><script src="/_next/static/chunks/main-a837451738e9bc430433.js" async=""></script><script src="/_next/static/chunks/webpack-50bee04d1dc61f8adf5b.js" async=""></script><script src="/_next/static/chunks/commons.3001023d071dd3bbe4b7.js" async=""></script><script src="/_next/static/chunks/9adc93607ca194fe33d5fd75450ccdb7397e9788.9fbf4a83f1e2236cbcd2.js" async=""></script><script src="/_next/static/chunks/36831c9346731e813c333dbc96f1dae7f0140181.0be75cecccf812d630d3.js" async=""></script><script src="/_next/static/chunks/3a4d373e4f729ad3d1487c5b24727311a83f72b6.56bb5d8090d059ec8b57.js" async=""></script><script src="/_next/static/chunks/pages/_app-443197cdf2ed8c4b363a.js" async=""></script><script src="/_next/static/chunks/pages/notes/%5Bslug%5D-771ca72895c067407b5c.js" async=""></script><script src="/_next/static/UTpuJG0W1qYQ-gcL4uUSR/_buildManifest.js" async=""></script><script src="/_next/static/UTpuJG0W1qYQ-gcL4uUSR/_ssgManifest.js" async=""></script></body></html>